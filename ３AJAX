import React from "react";
import ReactDOM from "react-dom";
import Weather from "./Weather";

import "./App.css";

function App() {
  return (
    <div className="App">
      <h1>React AJAX</h1>

      <h3>Challenge 1</h3>
      <p>Import axios</p>

      <h3>Challenge 2</h3>
      <p>
        Create a new component called Weather with a city property which returns
        an h1 with the sentence "The temperature in city is something°C".
        Include it here
      </p>
      <Weather city="New York" />

      <h3>Challenge 3</h3>
      <p>Use the OpenWeather API to get the city temperature in Celsius</p>
      <Weather city="Paris" />
      <Weather city="Tokyo" />
      <Weather city="Sydney" />
    </div>
  );
}

const rootElement = document.getElementById("root");
ReactDOM.render(<App />, rootElement);

import React, { useState } from "react";
import axios from "axios";

export default function Weather(props) {
  let [temperature, setTemperature] = useState(null);

  function showTemperature(response) {
    setTemperature(response.data.main.temp);
  }

  let url = `https://api.openweathermap.org/data/2.5/weather?q=${props.city}&appid=c6f8ef4575250284954db9f4dfa7a996&units=metric`;

  axios.get(url).then(showTemperature);

  if (temperature) {
    return (
      <h1>
        The temperature in {props.city} is currently {Math.round(temperature)}°C{" "}
      </h1>
    );
  } else {
    return <h1> Loading temperature for {props.city}...</h1>;
  }
}
